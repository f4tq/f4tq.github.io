<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1330" height="382" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[skopos->etcd locks: acquires tier-wide lock
skopos->drain: invokes
drain->etcd locks: acquires host lock
drain->drains tcp: calls
Note right of drains tcp: xrefs mesos-slave,marathon,docker info; iptables; slave stop
drain->drains docker: docker kill -s TERM]]></source><desc>Created with RaphaÃ«l 2.1.2</desc><defs><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block"></path><marker id="raphael-marker-endblock55-obj320" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj323" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj326" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj329" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj335" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker></defs><rect x="10" y="20" width="78" height="39" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="20" y="30" width="58" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="49" y="39.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">skopos</tspan></text><rect x="10" y="323" width="78" height="39" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="20" y="333" width="58" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="49" y="342.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">skopos</tspan></text><path fill="none" stroke="#000000" d="M49,59L49,323" stroke-width="2" style=""></path><rect x="232" y="20" width="118" height="39" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="242" y="30" width="98" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="291" y="39.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">etcd locks</tspan></text><rect x="232" y="323" width="118" height="39" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="242" y="333" width="98" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="291" y="342.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">etcd locks</tspan></text><path fill="none" stroke="#000000" d="M291,59L291,323" stroke-width="2" style=""></path><rect x="450" y="20" width="70" height="39" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="460" y="30" width="50" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="485" y="39.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">drain</tspan></text><rect x="450" y="323" width="70" height="39" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="460" y="333" width="50" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="485" y="342.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">drain</tspan></text><path fill="none" stroke="#000000" d="M485,59L485,323" stroke-width="2" style=""></path><rect x="540" y="20" width="118" height="39" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="550" y="30" width="98" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="599" y="39.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">drains tcp</tspan></text><rect x="540" y="323" width="118" height="39" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="550" y="333" width="98" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="599" y="342.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">drains tcp</tspan></text><path fill="none" stroke="#000000" d="M599,59L599,323" stroke-width="2" style=""></path><rect x="1154" y="20" width="146" height="39" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="1164" y="30" width="126" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="1227" y="39.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">drains docker</tspan></text><rect x="1154" y="323" width="146" height="39" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="1164" y="333" width="126" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="1227" y="342.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">drains docker</tspan></text><path fill="none" stroke="#000000" d="M1227,59L1227,323" stroke-width="2" style=""></path><rect x="59" y="74" width="222" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="170" y="84" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.5">acquires tier-wide lock</tspan></text><path fill="none" stroke="#000000" d="M49,98C49,98,251.40955781936646,98,286.0010349857621,98" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj320)" stroke-dasharray="0" style=""></path><rect x="233" y="113" width="68" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="267" y="123" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.5">invokes</tspan></text><path fill="none" stroke="#000000" d="M49,137C49,137,431.6046040058136,137,479.99063546943944,137" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj323)" stroke-dasharray="0" style=""></path><rect x="301" y="152" width="174" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="388" y="162" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.5">acquires host lock</tspan></text><path fill="none" stroke="#000000" d="M485,176C485,176,326.35594940185547,176,295.99048659205437,176" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj326)" stroke-dasharray="0" style=""></path><rect x="517" y="191" width="50" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="542" y="201" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.5">calls</tspan></text><path fill="none" stroke="#000000" d="M485,215C485,215,571.9892582893372,215,593.991424204316,215" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj329)" stroke-dasharray="0" style=""></path><rect x="619" y="235" width="588" height="29" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="624" y="240" width="578" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="913" y="249.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="6">xrefs mesos-slave,marathon,docker info; iptables; slave stop</tspan></text><rect x="764" y="279" width="184" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="856" y="289" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.5">docker kill -s TERM</tspan></text><path fill="none" stroke="#000000" d="M485,303C485,303,1157.1699398458004,303,1221.991015587766,303" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj335)" stroke-dasharray="0" style=""></path></svg>
